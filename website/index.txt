h1. Pow &#x2192; 'Path Manipulation'


h2. What

Pow encapsulates the functionality of several ruby libraries (FileUtils, Files, Pathname and Dir) by creating objects out path strings.

h2. Installing

<pre syntax="ruby">sudo gem install pow</pre>

h2. The basics

<pre syntax="ruby">
# The Simplest Example

require 'rubygems'
require 'pow'

path = Pow["."] # Let's create a pow object in the current directory.
</pre>

Wow, amazing right? I guess not. But we'll get to the good stuff. Let's look at how pow deals with directories. Assume we are dealing with a directory structure like this

h2. Demonstration of usage

Consider this directory structure

<ul>
  <li>/tmp</li>
  <ul>
    <li>README</li>
    <li>/sub_dir</li>
    <ul>
      <li>/suber_dir</li>
      <li>file.txt</li>
      <li>program</li>      
    </ul>
    <li>/extra_dir</li>
  </ul>
</ul>

<pre syntax="ruby">
# Open up the /tmp dir
path = Pow["/tmp"]

# Check out what's inside
path.each {|child| puts "#{child} - #{child.class.name}" }
</pre>

*Output*

<pre>
/tmp/README - Pow::File
/tmp/subdir - Pow::Directory
/tmp/suber_dir - Pow::Directory
/tmp/subdir/file.txt - Pow::File
/tmp/subdir/program - Pow::File
/tmp/extra_dir - Pow::Directory
</pre>

Cool, but what if I just want the directories or just the files?

<pre syntax="ruby">
path.files.each {|file| "This is a file #{file}"}
path.directories.each {|directory| "Here is a directory #{directory}"}
</pre>

When pow encounters a directory it creates a Pow::Directory object. This is enumerable so you can use all your favorite iterative methods on directory structures now.

<pre syntax="ruby">
path.find_all {|p| p.directory? and p.modified_at > 1.day.ago}
path.reject {|p| p.permissions == 744}
path.collect {|p| p.size}
</pre>

You can also create directories and files

<pre syntax="ruby">
path["new_dir"].create # New dir
path["tmp/tmp.file"].create # New file (if it has a '.' Pow considers it a file by default)"
path["tmp/also_a_file"].create_file # If you want to force file creation just use create_file (create_directory for the reverse)
</pre>

You can read and write to files as well

<pre syntax="ruby">
# Shove some stuff into tmp.file
path["tmp/tmp.file"].open("w") do |file|
  file.puts "Hey Baby!"
end

# Get the stuff out of tmp.file"
path["tmp/tmp.file"].open do |file|
  puts file.read
end

# Alternatively
path["tmp/tmp.file"].read
</pre>


You can delete files and directories

<pre syntax="ruby">
begin
  path.delete
rescue PowError => e
  puts "Oh no! It threw an error because the tmp dir is not empty... we will have to force it."
end

path["tmp"].delete!

path.exists? # => false
</pre>

With Pow you can also create directory structures such as

<ul>
  <li>/moar_tmp</li>
  <ul>
    <li>/empty_dir</li>
    <li>/sub_dir</li>
    <ul>
      <li>info.txt</li>
    </ul>
    <li>README</li>
  </ul>
</ul>

<pre syntax="ruby">
Pow["./moar"].create do
  Pow["empty_dir"].create
  
  Pow["sub_dir"].create do
    Pow["info.txt"].create {|file| file.puts "Here is the info you desired!"}
  end
  
  Pow["README"].create_file {|file| file.puts "I'm so glad you read this."}
end

puts "So what are the dirs in tmp"
puts Pow["./moar"].directories.join(", ")

puts
puts "What are the files in tmp"
puts Pow["./moar"].files.join(", ")

puts
puts "Is the empty dir empty? #{Pow['./moar/empty_dir'].empty?}"

Pow["./moar"].delete! # Clean up your mess
</pre>

*Output*
<pre>
So what are the dirs in tmp
/Users/corey/Code/pow/moar/empty_dir, /Users/corey/Code/pow/moar/sub_dir

What are the files in tmp
/Users/corey/Code/pow/moar/README

Is the empty dir empty? true
</pre>

Is there a super cool, but ultimately pointless way to create a Pow object?

<pre syntax="ruby">
path = Pow["."]/:tmp/:sub_dir/:another_dir/:deeper_still/"a.file"
path.create
</pre>

h2. Forum

"rubyforge forum":http://rubyforge.org/forum/?group_id=4563

h2. How to submit patches

Read the "8 steps for fixing other people's code":http://drnicwilliams.com/2007/06/01/8-steps-for-fixing-other-peoples-code/ and for section "8b: Submit patch to Google Groups":http://drnicwilliams.com/2007/06/01/8-steps-for-fixing-other-peoples-code/#8b-google-groups, use the Google Group above.

The trunk repository is <code>svn://rubyforge.org/var/svn/pow/trunk</code> for anonymous access.

h2. License

This code is free to use under the terms of the MIT license. 

h2. Contact

All contact can be done through the rubyforge page "http://rubyforge.org/projects/pow/":http://rubyforge.org/projects/pow/

